apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    type: validator
  name: test_username-validator
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: test_username-validator
      app.kubernetes.io/name: test_username
      managed-by: pangu
      type: validator
  serviceName: test_username-validator
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: test_username-validator
        app.kubernetes.io/name: test_username
        managed-by: pangu
        type: validator
    spec:
      containers:
      - command:
        - /usr/local/bin/creditchain-node
        - -f
        - /opt/creditchain/etc/validator.yaml
        image: aptoslabs/validator:devnet@sha256:f0c62463b0e86acc9ad081c54be2d1823f143f780c73828b876caebc978c8947
        name: test_username-validator
        ports:
        - containerPort: 6180
        - containerPort: 8080
        - containerPort: 6181
        - containerPort: 9101
        volumeMounts:
        - mountPath: /opt/creditchain/etc
          name: creditchain-config
        - mountPath: /opt/creditchain/genesis
          name: genesis-config
        - mountPath: /opt/creditchain/identites
          name: aptos-secret
        - mountPath: /opt/creditchain/data
          name: creditchain-data
      volumes:
      - configMap:
          name: test_username-validator-configmap
        name: creditchain-config
      - configMap:
          name: genesis-artifiact-configmap-pangu
        name: genesis-config
      - name: aptos-secret
        secret:
          secretName: identity-secrets-test_username
      - name: creditchain-data
        persistentVolumeClaim:
          claimName: test_username-validator-pvc
